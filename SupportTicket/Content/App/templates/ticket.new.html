<div ng-controller="TicketNewController as vm"  class="ctrl-template">
    <form name="newTicketForm">
        <h3 class="text-light">
            NEW SUPPORT REQUEST
        </h3>
        <hr class="thin bg-grayLighter">

        <div class="ms-TextField">
            <label class="ms-Label">Request Title</label>
            <input class="ms-TextField-field" ng-model="vm.ticket.requestTitle" name="requestTitle" id="requestTitle" required type="text">
        </div>

        <div class="ms-TextField ms-TextField--multiline">
            <label class="ms-Label">Request Body</label>
            <textarea class="ms-TextField-field" 
                ng-model="vm.ticket.Body"  id="requestBody"  
                name="requestBody" style="min-height:150px;">
            </textarea>
        </div>
        <div class="ms-Dropdown" tabindex="0">
            <label class="ms-Label">Request Type</label>
            <i class="ms-Dropdown-caretDown ms-Icon ms-Icon--caretDown"></i>
            <select class="ms-Dropdown-select"  ng-model="vm.ticket.requestType"  id="requestType"  name="requestType" >
                <option value="">Select request type…</option>
                <option value="Administration">Administration</option>
                <option value="Information">Information</option>
                <option value="Facilities">Facilities</option>
                <option value="Operations">Operations </option>
            </select>
        </div>
        <div class="ms-PeoplePicker single">
            <label class="ms-Label">Assigned To</label>
            <div class="ms-PeoplePicker-searchBox">
                <input class="ms-PeoplePicker-searchField" ng-model="vm.ticket.searchBox" ng-change="vm.search()" type="text">
					<input type="text" class="selectedKey ng-hide" ng-model="vm.ticket.key" />
            </div>
            <div class="ms-PeoplePicker-results">
                <div class="ms-PeoplePicker-resultGroups">
                    <ul class="ms-PeoplePicker-resultList"
                        ng-repeat="person in vm.peoplePicker">
                        <li class="ms-PeoplePicker-result"> <!-- ng-click="vm.ticket.assignedTo=this.person">-->
                            <div class="ms-Persona ms-Persona--square">
                                <div class="ms-Persona-imageArea">
                                    <i class="ms-Persona-placeholder ms-Icon ms-Icon--person"></i>
                                    <img class="ms-Persona-image" ng-src="{{person.image}}">
                                </div>
                                <div class="ms-Persona-presence"></div>
                                <div class="ms-Persona-details">
                                    <input type="hidden" class="ms-Persona-dataKey" value="{{person.Key}}" />
                                    <div class="ms-Persona-primaryText">{{person.DisplayText}}</div>
                                    <div class="ms-Persona-secondaryText">{{person.EntityData.Email}}</div>
                                </div>
                            </div>
                        </li>

                    </ul>

                </div>
            </div>
        </div>
        <div class="ms-Dropdown" tabindex="0">
            <label class="ms-Label">Request Status</label>
            <i class="ms-Dropdown-caretDown ms-Icon ms-Icon--caretDown"></i>
            <select class="ms-Dropdown-select" ng-model="vm.ticket.requestStatus" id="requestStatus" name="requestStatus">
                <option value="New">Select request status…</option>
                <option value="Open">Open</option>
                <option value="Under Review">Under Review</option>
                <option value="In Progress">In Progress</option>
                <option value="Done">Done</option>
                <option value="Done">Closed</option>
            </select>
        </div>
        <hr class="thin bg-grayLighter">
        <button class="button" ng-class="{'primary': newTicketForm.$valid }" 
                ng-click="vm.saveTicket()"><span class="mif-plus"></span> Save</button>
        <button class="button danger" ng-click="vm.resetForm()" type="button" formnovalidate><span class="mif-cancel"></span> Cancel </button>
        <hr class="thin bg-grayLighter">
    </form>
</div>
<script>
    $(".ms-Dropdown").Dropdown();
    $(".ms-TextField").TextField();
    $(".ms-PeoplePicker").PeoplePicker();

</script>